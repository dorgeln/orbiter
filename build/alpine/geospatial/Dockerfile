#syntax=docker/dockerfile:1.2
#generated by pip_deploy

FROM dorgeln/orbiter:alpine-geospatial-build-0.1.1 as build
FROM dorgeln/orbiter:alpine-core-0.1.1

USER root
WORKDIR /root
COPY alpine.pkg alpine.pkg
RUN --mount=type=cache,id=apk-cache,target=/etc/apk/cache \
    PKG=`cat alpine.pkg` && echo "Installing ${PKG}" && apk add ${PKG}
COPY --chown= --from=build /env  /env

WORKDIR ${HOME}
USER jovyan

CMD ["jupyter", "lab", "--ip", "0.0.0.0","--no-browser","--NotebookApp.token=''","--NotebookApp.password=''"]
EXPOSE 8888